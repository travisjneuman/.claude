# Plan 1-01: Router Architecture & Domain Detection

## Objective

Design and implement comprehensive domain detection for start-task.md that covers ALL possible prompt types and routes to appropriate resources.

## Complete Domain Taxonomy

### Development Domains (Existing - Verify Complete)

| Domain | Keywords | Local Skill | Local Agent | Marketplace |
|--------|----------|-------------|-------------|-------------|
| ios | ios, swift, swiftui, iphone, ipad, apple, xcode, uikit | ios-development | ios-developer | - |
| android | android, kotlin, jetpack, compose, gradle | android-development | android-developer | - |
| react | react, jsx, tsx, next.js, vite, tailwind, component | generic-react-* | react-expert | - |
| backend | api, server, endpoint, rest, express, nestjs | api-design | api-designer | - |
| database | database, db, sql, postgres, mongodb, redis, prisma | database-expert | database-architect | - |
| devops | deploy, ci/cd, docker, kubernetes, aws, gcp, azure, terraform | devops-cloud | devops-engineer | - |
| testing | test, jest, vitest, pytest, coverage, tdd, e2e | test-specialist | test-generator | - |
| security | security, auth, oauth, jwt, vulnerability, owasp | security | security-auditor | - |
| debugging | debug, bug, fix, error, crash, broken | debug-systematic | debugging-specialist | - |
| performance | performance, slow, optimize, speed, latency | - | performance-optimizer | - |
| graphql | graphql, schema, resolver, apollo, relay | graphql-expert | graphql-architect | - |
| microservices | microservice, distributed, kafka, rabbitmq | microservices-architecture | microservices-architect | - |
| i18n | i18n, localization, translate, rtl, language | i18n-localization | i18n-specialist | - |
| realtime | realtime, websocket, socket, streaming, sse | websockets-realtime | realtime-specialist | - |
| game | game, unity, unreal, godot, physics, sprite | game-development | game-developer | - |
| desktop | electron, tauri, desktop app, native | electron-desktop | desktop-developer | - |
| pwa | pwa, service worker, offline, manifest | pwa-development | - | - |
| ai-ml | ai, ml, machine learning, llm, pytorch, tensorflow | ai-ml-development | ml-engineer | - |
| flutter | flutter, dart, widget | flutter-development | mobile-architect | - |
| react-native | react native, expo | react-native | mobile-architect | - |
| macos | macos, appkit, catalyst | macos-native | macos-developer | - |

### Scientific Domains (NEW - from claude-scientific-skills)

| Domain | Keywords | Marketplace Skills |
|--------|----------|-------------------|
| bioinformatics | bioinformatics, genomics, dna, rna, sequence, gene, biopython, scanpy | claude-scientific-skills/* |
| chemistry | chemistry, molecule, compound, rdkit, chembl, drug | claude-scientific-skills/* |
| proteomics | protein, proteomic, uniprot, alphafold | claude-scientific-skills/* |
| clinical | clinical, trial, patient, clinvar, medical | claude-scientific-skills/* |
| physics | physics, quantum, qiskit, simulation | claude-scientific-skills/* |
| astronomy | astronomy, astro, astropy, telescope | claude-scientific-skills/* |
| materials | materials, material science | claude-scientific-skills/* |
| lab-automation | lab, laboratory, protocol, benchling | claude-scientific-skills/* |

### Business Domains (Existing + Expand)

| Domain | Keywords | Local Skill | Local Agent |
|--------|----------|-------------|-------------|
| startup | startup, launch, mvp, validate, pivot | startup-launch | startup-advisor |
| finance | finance, financial, valuation, dcf, lbo | finance | - |
| marketing | marketing, campaign, brand, seo, analytics | marketing | - |
| sales | sales, pipeline, crm, revenue, deals | sales | - |
| product | product, roadmap, prioritization, backlog | product-management | - |
| strategy | strategy, competitive, market analysis | business-strategy | - |
| operations | operations, supply chain, logistics | operations | - |
| hr | hr, hiring, talent, recruiting, culture | hr-talent | - |
| leadership | leadership, management, team, org | leadership | - |
| legal | legal, compliance, gdpr, privacy | legal-compliance | - |
| risk | risk, mitigation, contingency | risk-management | - |
| innovation | innovation, r&d, patents | innovation | - |
| sustainability | sustainability, esg, environmental | sustainability-esg | - |
| monetization | pricing, monetization, revenue model, saas | monetization-strategy | monetization-expert |
| health | wellness, health, employee | health-wellness | - |
| rd | r&d, research, development | rd-management | - |

### Creative Domains

| Domain | Keywords | Local Skill | Local Agent |
|--------|----------|-------------|-------------|
| graphic-design | design, visual, color, typography, layout, logo | graphic-design | graphic-designer |
| video | video, edit, premiere, final cut, youtube | video-production | video-producer |
| audio | audio, podcast, music, sound, mixing, mastering | audio-production | audio-engineer |
| brand | brand, identity, positioning, guidelines | brand-identity | brand-strategist |
| motion | animation, motion, micro-interaction, easing | ui-animation | motion-designer |
| ui | ui, user interface, layout, component | ui-research, frontend-enhancer | - |

### Quality & Process Domains

| Domain | Keywords | Local Skill | Marketplace Plugin |
|--------|----------|-------------|-------------------|
| code-review | review, pr, pull request, code quality | generic-code-reviewer | pr-review-toolkit:code-reviewer |
| refactoring | refactor, clean up, simplify | - | pr-review-toolkit:code-simplifier |
| documentation | document, docs, readme, jsdoc, comment | codebase-documenter | - |
| architecture | architecture, pattern, structure, design system | - | feature-dev:code-architect |
| tech-debt | tech debt, legacy, cleanup | tech-debt-analyzer | - |
| accessibility | accessibility, a11y, wcag, screen reader | - | accessibility-expert |

### Meta & Admin Domains

| Domain | Keywords | Action |
|--------|----------|--------|
| create-skill | create skill, new skill, make skill | /taches-cc-resources:create-agent-skill |
| create-hook | create hook, new hook, make hook | /taches-cc-resources:create-hook |
| create-command | create command, slash command | /taches-cc-resources:create-slash-command |
| create-agent | create agent, new agent | /taches-cc-resources:create-subagent |
| generate-skill | generate skill from, skill from docs | skill-seekers |
| commit | commit, save work | /commit-commands:commit |
| pr | pull request, create pr | /commit-commands:commit-push-pr |
| status | status, where was I, what's left | /gsd:progress |

### Research & Exploration Domains

| Domain | Keywords | Action |
|--------|----------|--------|
| research | research, look up, find out, what is, current | WebSearch |
| explore | explore codebase, understand how, find where | Task(Explore) |
| learn | learn about, explain, teach me | WebSearch + Skill |

### Decision Domains

| Domain | Keywords | Framework |
|--------|----------|-----------|
| root-cause | why, cause, reason | /taches-cc-resources:consider/5-whys |
| priority | priority, first, important, urgent | /taches-cc-resources:consider/eisenhower-matrix |
| choice | which, vs, compare, better, choose | /taches-cc-resources:consider/first-principles |
| impact | impact, effect, result, if I | /taches-cc-resources:consider/second-order |
| simplify | simplify, reduce, essential | /taches-cc-resources:consider/occams-razor |
| tradeoff | trade-off, pros cons, swot | /taches-cc-resources:consider/swot |

## Detection Priority Order

1. **Meta/Admin** (highest - specific commands)
2. **Decision** (decision frameworks take over)
3. **Scientific** (specialized domain)
4. **Development** (most common)
5. **Business** (expert skills)
6. **Creative** (specialized)
7. **Quality/Process** (cross-cutting)
8. **Research/Exploration** (fallback)

## Memory Integration (claude-mem)

Check at START of every task:
- Query claude-mem for relevant past context
- Load if found and relevant

Save at END of significant tasks:
- Key decisions made
- Architectural choices
- Important learnings

## Research Integration (WebSearch)

Trigger WebSearch when:
- "current", "latest", "2024", "2025" in prompt
- "what is the best way to" (seeking current practices)
- Technology version questions
- "is there a library for"
- Documentation needs for external tools

## Implementation Steps

1. [ ] Rewrite domain detection section with complete taxonomy
2. [ ] Add scientific domain detection
3. [ ] Add business domain expansion
4. [ ] Add meta/admin detection
5. [ ] Add research trigger detection
6. [ ] Add memory check step
7. [ ] Update resource loading tables
8. [ ] Update routing logic

## Validation

Test prompts that should route correctly:
- "Analyze this protein sequence" → scientific + bioinformatics
- "Create a pricing strategy" → business + monetization
- "What's the latest React 19 feature" → research + react
- "Design a microservices architecture" → architecture + microservices
- "Create a skill for my workflow" → meta + create-skill
