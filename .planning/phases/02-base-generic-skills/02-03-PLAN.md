---
phase: 02-base-generic-skills
plan: 03
type: execute
---

<objective>
Enhance generic-feature-developer with architecture decision trees, data flow patterns, and API design guidance.

Purpose: The current skill at 108 lines is the thinnest of the four base skills - mostly architecture patterns without decision guidance. This plan adds expert-level frameworks for feature development decisions.
Output: Enhanced generic-feature-developer SKILL.md with decision trees, data flow details, state management patterns (~180-220 lines).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Phase 1 templates for reference:**
@.planning/templates/skill-enhancement-template.md
@.planning/templates/skill-quality-checklist.md

**Shared standards:**
@skills/_shared/CODE_REVIEW_STANDARDS.md

**Current skill to enhance:**
@skills/generic-feature-developer/SKILL.md

**Prior decisions affecting this phase:**
- Use Template C (Utility Skills) structure for workflow-oriented skills
- Include decision trees for complex choices
- Add self-critique step for technical output

**Current gaps identified:**
- No decision guidance for architecture choices
- Data flow patterns too brief (single lines)
- No API design patterns
- No state management selection guidance
- Missing "when to use" clarity
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Feature Decision Framework</name>
  <files>skills/generic-feature-developer/SKILL.md</files>
  <action>
Add comprehensive decision framework after the Development Workflow section:

**Feature Decision Framework:**

1. **Scope Assessment (First):**
   - Single component → Implement directly
   - Cross-cutting concern → Design interface first
   - New subsystem → Create architecture doc, get approval

2. **Build vs Integrate Decision:**
   | Factor | Build Custom | Use Library |
   |--------|--------------|-------------|
   | Core to product | ✓ | |
   | Commodity feature | | ✓ |
   | Tight integration needed | ✓ | |
   | Time-critical | | ✓ |
   | Long-term ownership | ✓ | |

3. **State Management Selection:**
   | Scope | Solution |
   |-------|----------|
   | Component-local | useState/useReducer |
   | Feature-wide | Context or Zustand slice |
   | App-wide | Zustand/Redux store |
   | Server state | React Query/SWR |
   | Form state | React Hook Form |

4. **API Design Checklist:**
   - [ ] RESTful or GraphQL decision documented
   - [ ] Authentication method chosen
   - [ ] Error response format standardized
   - [ ] Pagination strategy defined
   - [ ] Rate limiting considered

Keep to ~50 lines for this section.
  </action>
  <verify>Feature Decision Framework section present with 4 subsections</verify>
  <done>Decision framework added covering scope, build/integrate, state, and API design</done>
</task>

<task type="auto">
  <name>Task 2: Enhance Data Flow and Error Handling patterns</name>
  <files>skills/generic-feature-developer/SKILL.md</files>
  <action>
Expand the brief Data Flow Patterns and Error Handling sections:

**Data Flow Patterns (expanded):**

1. **Frontend Data Flow:**
   ```
   User Action → Event Handler → State Update → Re-render → UI Feedback
   ```
   - Optimistic updates: Update UI immediately, rollback on error
   - Pessimistic updates: Wait for server confirmation
   - Decision: Use optimistic for low-risk actions (likes), pessimistic for high-risk (payments)

2. **API Request Flow:**
   ```
   Request → Auth Check → Validation → Business Logic → Database → Response
   ```
   - Early exit on validation failure
   - Transaction boundaries around multi-step operations
   - Consistent error response format

3. **Event-Driven Patterns:**
   - User events → Immediate feedback
   - Server events → WebSocket/SSE for real-time
   - Background tasks → Queue for long operations

**Error Handling Strategy (expanded):**

| Error Type | Frontend | Backend |
|------------|----------|---------|
| Validation | Inline field errors | 400 + field errors |
| Auth | Redirect to login | 401/403 |
| Not Found | Empty state or redirect | 404 |
| Server Error | Generic message + retry | 500 + log |
| Network | Offline indicator + queue | N/A |

Keep to ~40 lines for these sections.
  </action>
  <verify>Data Flow Patterns expanded with 3 patterns, Error Handling has strategy table</verify>
  <done>Data flow and error handling sections enhanced with decision guidance</done>
</task>

<task type="auto">
  <name>Task 3: Add When to Use guidance and self-critique step</name>
  <files>skills/generic-feature-developer/SKILL.md</files>
  <action>
1. **Add "When to Use This Skill" section** at top:
   - Adding new features to existing codebase
   - Modifying or extending current systems
   - Planning architectural changes
   - Choosing between implementation approaches
   - Designing data flow for new functionality

2. **Add "Don't Use When" guidance:**
   - Pure UI/styling work → use generic-design-system
   - UX design decisions → use generic-ux-designer
   - Code review → use generic-code-reviewer

3. **Add Feature Implementation Checklist** (self-critique):
   Before marking feature complete:
   - [ ] Works for happy path
   - [ ] Error states handled
   - [ ] Loading states implemented
   - [ ] Edge cases tested
   - [ ] TypeScript types complete
   - [ ] Tests written
   - [ ] Documentation updated

4. **Update See Also section:**
   - Add cross-references to related skills
   - Add "READ shared standards when:" guidance

5. **Final validation:**
   - Verify 180-220 lines total
   - No duplication of shared standards
   - Decision trees not flat checklists

Target: 200 lines final.
  </action>
  <verify>wc -l skills/generic-feature-developer/SKILL.md shows 180-220 lines, When to Use and Checklist present</verify>
  <done>Skill enhanced with usage guidance, self-critique checklist, within line target</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Feature Decision Framework with 4 subsections
- [ ] Build vs Integrate decision table
- [ ] State Management Selection table
- [ ] API Design Checklist
- [ ] Data Flow Patterns expanded (3 patterns)
- [ ] Error Handling Strategy table
- [ ] When to Use section present
- [ ] Feature Implementation Checklist (self-critique)
- [ ] Cross-references to related skills
- [ ] 180-220 lines total
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- generic-feature-developer provides decision guidance (not just patterns)
- Self-critique step included for feature quality
- Ready to serve as base for Phase 4 stack-specific variants
</success_criteria>

<output>
After completion, create `.planning/phases/02-base-generic-skills/02-03-SUMMARY.md`:

# Phase 2 Plan 3: Generic Feature Developer Summary

**[Substantive one-liner about what was enhanced]**

## Performance
- Duration: [X] min
- Started: [timestamp]
- Completed: [timestamp]
- Tasks: 3
- Files modified: 1

## Accomplishments
- [Key outcome 1]
- [Key outcome 2]

## Files Modified
- `skills/generic-feature-developer/SKILL.md` - [Changes made]

## Key Enhancements
- Feature Decision Framework: [what guidance it provides]
- Data Flow Patterns: [coverage]
- Self-critique checklist: [what it verifies]

## Decisions Made
[Key decisions, or "None"]

## Issues Encountered
[Problems and resolutions, or "None"]

## Next Step
Ready for 02-04-PLAN.md (generic-ux-designer)
</output>
